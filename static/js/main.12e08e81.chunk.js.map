{"version":3,"sources":["../../../src/tickets.ts","../../../src/exportExcel.ts","../../../src/Fahrt.ts","../../../src/Fahrtabschnitt.ts","../../../src/efaHelper.ts","../../../src/index.ts","FormLoadingSpinner.js","SearchStopField.tsx","StopField.tsx","StopBox.tsx","RouteView.tsx","Routes.tsx","Reisende.tsx","Tarifangebot.tsx","saveToFile.ts","App.tsx","serviceWorker.ts","index.tsx","../../dvbjs/packages/dvbjs/dist/src/utils.js","../../dvbjs/packages/dvbjs/dist/src/index.js","../../dvbjs/packages/dvbjs/dist/src/interfaces.js","../../../src/Fahrgast.ts","../../../src/Tester.ts","../../dvbjs/packages/dvbjs/dist/src/coords.js","../../dvbjs/packages/dvbjs/dist/src/find.js","../../dvbjs/packages/dvbjs/dist/src/lines.js","../../dvbjs/packages/dvbjs/dist/src/monitor.js","../../dvbjs/packages/dvbjs/dist/src/pins.js","../../dvbjs/packages/dvbjs/dist/src/route.js"],"names":["Produkt","Preisstufe","this","FormLoadingSpinner","props","isLoading","icon","faSpinner","Component","getSuggestionValue","suggestion","name","renderSuggestion","city","shouldRenderSuggestions","value","trim","length","SearchStopField","onSuggestionSelected","event","data","handleNewSelectedStop","onSuggestionsFetchRequested","getSuggestions","onSuggestionsClearRequested","setState","suggestions","state","handleChange","bind","term","dvb","then","slice","error","console","inputValue","toLowerCase","replace","getStopArray","currentTarget","inputProps","placeholder","onChange","className","StopField","stop","type","aria-label","onClick","handleResetClick","aria-hidden","id","React","StopBox","stopField","title","moment","locale","NodeTableRowsItems","stopType","mode","line","direction","stopName","abfahrt","RouteView","formatDate","time","departure","gleis","platform","richtung","linie","NodeTableRows","node","departureRow","arrivalRow","arrival","rows","stops","map","index","RouteDetails","nodeViews","RouteNodes","key","NodeItem","modeImage","iconUrl","src","alt","lineName","LineItems","trip","lines","nodes","forEach","undefined","push","Fragment","StopItem","stopLocation","showDetails","handleSelectRoute","handleEditTrip","toggleShowDetails","handleSelectedTrip","dauer","Date","duration","format","umstiege","interchanges","isSelectable","selectable","faCheckSquare","faPen","faChevronUp","faChevronDown","date","Routes","fetchedRoutes","from","fromStop","to","toStop","via","viaStop","dateTime","log","route","catch","err","prevProps","fetchRoutes","content","selectedTrip","e","size","pulse","trips","Reisende","disabled","faTrash","faPlus","Tarifangebot","tickets","Ticket","getAllProducts","actionMeta","angebot","item","produkt","preisstufe","handleProductsChange","options","style","width","isMulti","selectedOption","handleNewSelectedProducts","savetoFile","testCase","fileName","toISOString","Tester","exportSingleTestCase","buffer","a","save","RoutingOptions","useState","isOpen","setIsOpen","Collapse","in","timeout","Button","aria-controls","aria-expanded","variant","block","fixedWidth","UseTestCaseComponent","handleExportToFile","faFileDownload","faPaperPlane","App","tripDateTime","angebote","fahrgaeste","Fahrgast","nr","handleNewSelectedFromStop","handleResetClickForFromStop","handleNewSelectedToStop","handleResetClickForToStop","handleNewSelectedViaStop","handleResetClickForViaStop","handelNewDate","stop_id","toDate","arrayOfTickets","ticket","isTripSelected","dateFormat","timeFormat","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message","__importDefault","mod","__esModule","Object","defineProperty","exports","dateDifference","extractTrip","parsePoiID","parseMode","parsePin","parseConnections","MODES","parsePlatform","parseDiva","parseDate","convertError","constructError","checkStatus","convertCoordinates","WmOrGK4toWGS84","WGS84toWm","WGS84toGK4","proj4_1","require","interfaces_1","lng","lat","latInt","parseInt","lngInt","isNaN","default","s","coords","gk4Chords","split","i","len","coordinate","Error","d","matches","Number","number","network","Network","p","Name","Type","connections","types","typesArray","str","Tram","CityBus","IntercityBus","Train","SuburbanRailway","HailedSharedTaxi","Ferry","Cableway","PlusBus","connectionType","concat","Footpath","StairsUp","StairsDown","EscalatorUp","EscalatorDown","ElevatorUp","ElevatorDown","StayForConnection","extractStop","DataId","Place","Platform","Longitude","Latitude","ArrivalTime","DepartureTime","defs","Math","round","Status","Code","Message","response","dataAsString","PIN_TYPE","poi","parkandride","rentabike","carsharing","ticketmachine","unknown","pinType","platformNr","info","poiId","join","POI_TYPE","Address","Coords","POI","Stop","PartialRoutes","mapData","RegularStops","firstStop","lastStop","Mot","Direction","diva","Diva","Duration","path","MapDataIndex","extractNode","MapData","Interchanges","start","end","getTime","__createBinding","create","o","m","k","k2","enumerable","get","__exportStar","hasOwnProperty","coords_1","find_1","findAddress","findPOI","findStop","lines_1","monitor_1","monitor","pins_1","pins","route_1","arr","__setModuleDefault","v","__importStar","result","call","axios_1","utils","url","params","responseType","coordinates","pointFinder","stopsOnly","assignedStops","limit","query","Points","pointName","searchString","gk4","points","assign","parseDirection","parseLine","directions","Directions","stopID","stopid","Lines","l","utils_1","offset","amount","now","isarrival","shorttermchanges","mentzonly","Departures","arrivalTime","RealTime","ScheduledTime","scheduledTime","Id","LineName","arrivalTimeRelative","scheduledTimeRelative","delayTime","State","swlng","swlat","nelng","nelat","pinTypes","sw","ne","elements","elem","originID","destinationID","isArrivalTime","origin","destination","isarrivaltime","firstTrip"],"mappings":"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","file":"static/js/main.12e08e81.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Produkt;\n(function (Produkt) {\n    Produkt[\"Einzelfahrt\"] = \"Einzelfahrt\";\n    Produkt[\"EinzelfahrtErmaessigt\"] = \"Einzelfahrt erm\\u00E4\\u00DFigt\";\n    Produkt[\"ViererKarte\"] = \"4er-Karte\";\n    Produkt[\"ViererKarteErmaessigt\"] = \"4er-Karte erm\\u00E4\\u00DFigt\";\n    Produkt[\"Tageskarte\"] = \"Tageskarte\";\n    Produkt[\"TageskarteErmaessigt\"] = \"Tageskarte erm\\u00E4\\u00DFigt\";\n    Produkt[\"NachtTicket\"] = \"NachtTicket\";\n    Produkt[\"Familientageskarte\"] = \"Familientageskarte\";\n    Produkt[\"Kleingruppenkarte\"] = \"Kleingruppenkarte\";\n    Produkt[\"Wochenkarte\"] = \"Wochenkarte\";\n    Produkt[\"WochenkarteErmaessigt\"] = \"Wochenkarte erm\\u00E4\\u00DFigt\";\n    Produkt[\"Monatskarte\"] = \"Monatskarte\";\n    Produkt[\"MonatskarteErmaessigt\"] = \"Monatskarte erm\\u00E4\\u00DFigt\";\n    Produkt[\"NeunUhrMonatskarte\"] = \"9-Uhr-Monatskarte\";\n})(Produkt = exports.Produkt || (exports.Produkt = {}));\nvar Preisstufe;\n(function (Preisstufe) {\n    Preisstufe[\"PS1\"] = \"PS 1\";\n    Preisstufe[\"PS2\"] = \"PS 2\";\n    Preisstufe[\"PS3\"] = \"PS 3\";\n    Preisstufe[\"PS4\"] = \"PS 4\";\n    Preisstufe[\"PSA\"] = \"PS A\";\n    Preisstufe[\"PSA1\"] = \"PS A 1\";\n    Preisstufe[\"PSB\"] = \"PS B\";\n    Preisstufe[\"PSC\"] = \"PS C\";\n    Preisstufe[\"PSD\"] = \"PS D\";\n})(Preisstufe = exports.Preisstufe || (exports.Preisstufe = {}));\nclass Ticket {\n    constructor(produkt, preisstufe, reisendenbezug = [1], pv = { orgId: 6060, name: \"VVO\" }) {\n        this.produkt = produkt;\n        this.preisstufe = preisstufe;\n        this.reisendenbezug = reisendenbezug;\n        this.pv = pv;\n        this.priceTableMap = Ticket.getPretPriceTableForProduct(this.produkt);\n    }\n    static getAllProducts() {\n        const items = Ticket.allProducts;\n        const newItems = items.map((item) => {\n            const alabel = `${item.produkt} ${item.preisstufe}`;\n            const newObject = {\n                label: alabel,\n                value: item.id.toString(),\n            };\n            return Object.assign(Object.assign({}, item), newObject);\n        });\n        return newItems;\n    }\n    static getPretPriceTableForProduct(produkt) {\n        switch (produkt) {\n            case Produkt.Einzelfahrt:\n                return new Map([\n                    [Preisstufe.PS1, 250],\n                    [Preisstufe.PS2, 450],\n                    [Preisstufe.PS3, 680],\n                    [Preisstufe.PS4, 900],\n                ]);\n            case Produkt.EinzelfahrtErmaessigt:\n                return new Map([\n                    [Preisstufe.PS1, 170],\n                    [Preisstufe.PS2, 310],\n                    [Preisstufe.PS3, 460],\n                    [Preisstufe.PS4, 600],\n                ]);\n            case Produkt.Tageskarte:\n                return new Map([\n                    [Preisstufe.PSA, 650],\n                    [Preisstufe.PSB, 950],\n                    [Preisstufe.PSD, 1500],\n                ]);\n            case Produkt.TageskarteErmaessigt:\n                return new Map([\n                    [Preisstufe.PSA, 550],\n                    [Preisstufe.PSB, 800],\n                    [Preisstufe.PSD, 1300],\n                ]);\n            case Produkt.NachtTicket:\n                return new Map([\n                    [Preisstufe.PSD, 800],\n                ]);\n            case Produkt.Familientageskarte:\n                return new Map([\n                    [Preisstufe.PSA, 1000],\n                    [Preisstufe.PSB, 1450],\n                    [Preisstufe.PSD, 2150],\n                ]);\n            case Produkt.Kleingruppenkarte:\n                return new Map([\n                    [Preisstufe.PSA, 1650],\n                    [Preisstufe.PSB, 2350],\n                    [Preisstufe.PSD, 3150],\n                ]);\n        }\n    }\n    export(fahrtenbezug) {\n        let result = \"\";\n        result += `${this.pv.orgId};${this.pv.name}\\r\\n`;\n        result += `${this.produkt}\\r\\n`;\n        result += `${this.preisstufe}\\r\\n`;\n        result += `[${this.price()};Euro-Cent]\\r\\n`;\n        result += `[${this.reisendenbezug.toString()}]\\r\\n`;\n        const reisendenbezugVon = `${fahrtenbezug.VonFahrtindex}:${fahrtenbezug.VonHaltestellenindex}`;\n        const reisendenbezugNach = `${fahrtenbezug.NachFahrtindex}:${fahrtenbezug.NachHaltestellenindex}`;\n        result += `[${reisendenbezugVon};${reisendenbezugNach}]`;\n        return result;\n    }\n    name() {\n        return this.produkt;\n    }\n    price() {\n        const price = this.priceTableMap.get(this.preisstufe) ? this.priceTableMap.get(this.preisstufe).toString() : \"\";\n        return price;\n    }\n}\nexports.Ticket = Ticket;\nTicket.allProducts = [\n    { id: 1, produkt: Produkt.Einzelfahrt, preisstufe: Preisstufe.PS1 },\n    { id: 2, produkt: Produkt.Einzelfahrt, preisstufe: Preisstufe.PS2 },\n    { id: 3, produkt: Produkt.Einzelfahrt, preisstufe: Preisstufe.PS3 },\n    { id: 4, produkt: Produkt.Einzelfahrt, preisstufe: Preisstufe.PS4 },\n    { id: 5, produkt: Produkt.EinzelfahrtErmaessigt, preisstufe: Preisstufe.PS1 },\n    { id: 6, produkt: Produkt.EinzelfahrtErmaessigt, preisstufe: Preisstufe.PS2 },\n    { id: 7, produkt: Produkt.EinzelfahrtErmaessigt, preisstufe: Preisstufe.PS3 },\n    { id: 8, produkt: Produkt.EinzelfahrtErmaessigt, preisstufe: Preisstufe.PS4 },\n    { id: 9, produkt: Produkt.Tageskarte, preisstufe: Preisstufe.PSA },\n    { id: 10, produkt: Produkt.Tageskarte, preisstufe: Preisstufe.PSB },\n    { id: 11, produkt: Produkt.Tageskarte, preisstufe: Preisstufe.PSD },\n    { id: 12, produkt: Produkt.TageskarteErmaessigt, preisstufe: Preisstufe.PSA },\n    { id: 13, produkt: Produkt.TageskarteErmaessigt, preisstufe: Preisstufe.PSB },\n    { id: 14, produkt: Produkt.TageskarteErmaessigt, preisstufe: Preisstufe.PSD },\n    { id: 15, produkt: Produkt.NachtTicket, preisstufe: Preisstufe.PSD },\n    { id: 16, produkt: Produkt.Familientageskarte, preisstufe: Preisstufe.PSA },\n    { id: 17, produkt: Produkt.Familientageskarte, preisstufe: Preisstufe.PSB },\n    { id: 18, produkt: Produkt.Familientageskarte, preisstufe: Preisstufe.PSD },\n    { id: 19, produkt: Produkt.Kleingruppenkarte, preisstufe: Preisstufe.PSA },\n    { id: 20, produkt: Produkt.Kleingruppenkarte, preisstufe: Preisstufe.PSB },\n    { id: 21, produkt: Produkt.Kleingruppenkarte, preisstufe: Preisstufe.PSD },\n];\n//# sourceMappingURL=tickets.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst exceljs = require(\"exceljs\");\nclass ExcelExport {\n    constructor() {\n        this.workbook = new exceljs.Workbook();\n        this.workbook.addWorksheet(\"SheetName\", { properties: { tabColor: { argb: \"FFC0000\" } } });\n        this.worksheet = this.workbook.getWorksheet(\"SheetName\");\n    }\n    addRow(arr) {\n        this.worksheet.addRow(arr);\n    }\n    saveFile(filename) {\n        this.workbook.xlsx.writeFile(filename)\n            .then(() => {\n            console.log(\"Exported file!\");\n        });\n    }\n    toBuffer() {\n        return this.workbook.xlsx.writeBuffer();\n    }\n}\nexports.ExcelExport = ExcelExport;\n//# sourceMappingURL=exportExcel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Fahrtabschnitt_1 = require(\"./Fahrtabschnitt\");\nclass Fahrt {\n    constructor(fahrt, filterFootpath = false) {\n        let fahrtabschnitte = fahrt.nodes;\n        if (filterFootpath) {\n            fahrtabschnitte = fahrtabschnitte.filter(Fahrt.isINodeFootpath);\n        }\n        this.zwischenhaltestellen = fahrtabschnitte.map((item) => new Fahrtabschnitt_1.Fahrtabschnitt(item));\n    }\n    static isINodeFootpath(element) {\n        if (element.mode) {\n            switch (element.mode.name) {\n                case \"Footpath\":\n                case \"StairsUp\":\n                case \"StairsDown\":\n                    return false;\n                default:\n                    return true;\n            }\n        }\n        else {\n            return true;\n        }\n    }\n    fahrtenbezug() {\n        const obj = {\n            VonFahrtindex: 1,\n            VonHaltestellenindex: 1,\n            NachFahrtindex: this.zwischenhaltestellen.length,\n            NachHaltestellenindex: this.zwischenhaltestellen[this.zwischenhaltestellen.length - 1].stops.length,\n        };\n        return obj;\n    }\n    exportToExcel() {\n        let arr = [];\n        this.zwischenhaltestellen.forEach((item) => {\n            arr = arr.concat(item.exportToExcel());\n        });\n        for (let index = 0; index < Fahrt.ExcelColumns; index++) {\n            if (!arr[index]) {\n                arr[index] = \"\";\n            }\n        }\n        return arr;\n    }\n    exportToCsv() {\n        let result = \"\";\n        this.zwischenhaltestellen.forEach((item) => {\n            result += item.exportToCsv() + \"\\r\\n\";\n        });\n        return result;\n    }\n}\nexports.Fahrt = Fahrt;\nFahrt.ExcelColumns = 6 * 7;\n//# sourceMappingURL=Fahrt.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst efaHelper_1 = require(\"./efaHelper\");\nconst Tester_1 = require(\"./Tester\");\nclass Fahrtabschnitt {\n    constructor(node) {\n        this.stops = node.stops;\n        this.departure = node.departure;\n        this.arrival = node.arrival;\n        this.mode = node.mode;\n        this.line = node.line;\n        this.direction = node.direction;\n        this.diva = node.diva;\n        this.duration = node.duration;\n        this.path = node.path;\n    }\n    static formatINodeMode(element) {\n        switch (element.name) {\n            case \"Train\":\n                return \"09;S-Bahn\";\n            case \"CityBus\":\n            case \"PlusBus\":\n                return \"06;Bus\";\n            case \"Tram\":\n                return \"05;Straßenbahn\";\n            case \"Cablecar\":\n                return \"56;Bergbahn\";\n            case \"Ferry\":\n                return \"07;Schiff/Fähre\";\n            default:\n                return element.name;\n        }\n    }\n    static apiIdToGlobalID(id) {\n        const stopNumber = parseInt(id, 10);\n        return efaHelper_1.efa2globalID(stopNumber);\n    }\n    static apiDiva2GlobalID(line, diva) {\n        if (diva) {\n            const efaID = `${diva.network}:${diva.number}`;\n            const globalID = efaHelper_1.efaLine2GlobalLine(efaID);\n            return `${globalID};${line}`;\n        }\n        else {\n            return `;${line}`;\n        }\n    }\n    static exportStopToString(stop) {\n        const id = Fahrtabschnitt.apiIdToGlobalID(stop.id);\n        const name = stop.name + \" \" + stop.city;\n        const arrival = Tester_1.Tester.convertDateToXmlTimestamp(stop.arrival);\n        const departure = Tester_1.Tester.convertDateToXmlTimestamp(stop.departure);\n        return `${id};${name};${arrival};${departure}`;\n    }\n    exportToExcel() {\n        const stopsArray = this.stopsToStringArray();\n        let first = stopsArray.shift();\n        if (!first) {\n            first = \"\";\n        }\n        let last = stopsArray.pop();\n        if (!last) {\n            last = \"\";\n        }\n        const verkehrsmitteltyp = this.mode ? Fahrtabschnitt.formatINodeMode(this.mode) : \"\";\n        const linie = Fahrtabschnitt.apiDiva2GlobalID(this.line, this.diva);\n        const linienbetreiber = \"00;UNKNOWN\";\n        let mid = \"\";\n        stopsArray.forEach((item, index) => {\n            mid += item;\n            if (index !== stopsArray.length - 1) {\n                mid += \"\\r\\n\";\n            }\n        });\n        return [first, mid, last, verkehrsmitteltyp, linie, linienbetreiber];\n    }\n    exportToCsv() {\n        const stopsArray = this.stopsToStringArray();\n        const first = stopsArray.shift();\n        const last = stopsArray.pop();\n        let mid = \"\";\n        if (stopsArray.length > 0) {\n            stopsArray.forEach((item) => {\n                mid += item + \"\\r\\n\";\n            });\n        }\n        const result = `\"${first}\";\"${mid}\";\"${last}\";`;\n        return result;\n    }\n    stopsToStringArray() {\n        const arr = this.stops.map((item) => {\n            return Fahrtabschnitt.exportStopToString(item);\n        });\n        return arr;\n    }\n}\nexports.Fahrtabschnitt = Fahrtabschnitt;\n//# sourceMappingURL=Fahrtabschnitt.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lines_json_1 = require(\"./lines.json\");\nconst stops_json_1 = require(\"./stops.json\");\nfunction efa2globalID(efaID) {\n    const foundStop = stops_json_1.stops.find((e) => e.efaID === efaID);\n    if (foundStop) {\n        return foundStop.globalID;\n    }\n    else {\n        return `ERROR! ${efaID} not found`;\n    }\n}\nexports.efa2globalID = efa2globalID;\nfunction efaLine2GlobalLine(efaLine) {\n    const foundLine = lines_json_1.lines.find((e) => e.efaLiniennummer === efaLine);\n    if (foundLine) {\n        return foundLine.globalID;\n    }\n    else {\n        return `TODO! ${efaLine}`;\n    }\n}\nexports.efaLine2GlobalLine = efaLine2GlobalLine;\n//# sourceMappingURL=efaHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tickets_1 = require(\"./tickets\");\nexports.Ticket = tickets_1.Ticket;\nexports.Produkt = tickets_1.Produkt;\nexports.Preisstufe = tickets_1.Preisstufe;\nvar Fahrgast_1 = require(\"./Fahrgast\");\nexports.Fahrgast = Fahrgast_1.Fahrgast;\nvar Tester_1 = require(\"./Tester\");\nexports.Tester = Tester_1.Tester;\n//# sourceMappingURL=index.js.map","import React, { Component } from 'react';\nimport './FormLoadingSpinner.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons'\n\nclass FormLoadingSpinner extends Component {\n    render() {\n        const isLoading = this.props.isLoading;\n        if (isLoading) {\n            return (\n                // <i className=\"fa fa-spinner fa-pulse\" id=\"loadingSpinner\"></i>\n                <FontAwesomeIcon icon={faSpinner} />\n            )\n        }\n        else {\n            return null\n        }\n    }\n}\n\nexport default FormLoadingSpinner","import React, { Component, FormEvent, ChangeEvent } from 'react';\n// import axios from 'axios';\nimport * as dvb from 'dvbjs';\nimport {IPoint} from 'dvbjs';\nimport Autosuggest, { OnSuggestionSelected, SuggestionSelectedEventData, SuggestionsFetchRequested, SuggestionsFetchRequestedParams, InputProps } from 'react-autosuggest';\nimport './SearchStopField.css'\nimport FormLoadingSpinner from './FormLoadingSpinner.js'\n\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n// import { faSearch } from '@fortawesome/free-solid-svg-icons'\n\n\n/* ----------------- */\n/*    Helper Methods */\n/* ----------------- */\n\nfunction escapeRegexCharacters(str:string) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n/* ----------------- */\n/*    Suggestions    */\n/* ----------------- */\n\n// type renderInputComponentProps = { \n//     placeholder?: string,\n//     value:string,\n//     className?: string,\n//     onChange: (event: ChangeEvent<HTMLInputElement>) => void\n// }; \n\n\nconst getSuggestionValue = (suggestion: IPoint) => suggestion.name;\n\nconst renderSuggestion = (suggestion:IPoint) => (\n    <div>\n    {suggestion.name}<br />\n    <small>{suggestion.city}</small>\n    </div>\n    );\n    \n    const shouldRenderSuggestions = (value:string) => {\n        // console.log(\"shouldRenderSuggestions\")\n        return value.trim().length > 2;\n    }\n    \n    /* ----------------- */\n    /*    Exports        */\n    /* ----------------- */\n    \n    export interface ISearchStopFieldProps {\n        handleNewSelectedStop : (stop_id:IPoint) => void,\n        placeholder: string\n    }\n    interface IState {\n        value:string, \n        suggestions: IPoint[],\n        isLoading: boolean\n    }\n    \n    export class SearchStopField extends Component<ISearchStopFieldProps, IState> {\n        \n        // renderInputComponent : RenderInputComponent<IPoint> = (inputProps : InputProps<IPoint>) : ReactNode => (\n        //     <div className=\"input-group\">\n        //     <div className=\"input-group-prepend\">\n        //     <div className=\"input-group-text\">\n        //     {/* <i className=\"fa fa-search\"></i> */}\n        //     <FontAwesomeIcon icon={faSearch} />\n        //     </div>\n        //     </div>\n        //     {/* onChange={this.handleChange}  */}\n        //     <input {...inputProps} />\n        //     </div>\n            \n        //     )\n            \n            constructor(props: ISearchStopFieldProps) {\n                super(props);\n                this.state = {\n                    value: '',\n                    suggestions: [],\n                    isLoading: false\n                };\n                this.handleChange = this.handleChange.bind(this);\n            }\n            \n            onSuggestionSelected : OnSuggestionSelected<IPoint> = (event:React.FormEvent<any>, data: SuggestionSelectedEventData<IPoint>) => {\n                return this.props.handleNewSelectedStop(data.suggestion);\n            }\n            \n            //    onChange = (event: React.ChangeEvent<HTMLInputElement>, params: Autosuggest.ChangeEvent)=> {\n            //         const newValue = event.target.value;\n            //         this.setState({\n            //              value: newValue\n            //         });\n            //     };\n            \n            getStopArray(term:string) {\n                // console.log(\"getStopArray fired\")\n                this.setState({\n                    isLoading: true\n                });\n                dvb.findStop(term)\n                .then((data) => {\n                    this.setState({\n                        suggestions: data.slice(0, 15),\n                        isLoading: false\n                    });\n                },\n                (error) => {\n                    console.error(error);\n                }\n                );\n            }\n            \n            getSuggestions(value:string) {\n                // console.log(\"getSuggestions\")\n                const inputValue = escapeRegexCharacters(value.trim().toLowerCase());\n                const inputLength = inputValue.length;\n                \n                if (inputLength === 0) {\n                    this.setState({\n                        suggestions: []\n                    });\n                }\n                else {\n                    this.getStopArray(inputValue);\n                }\n            };\n            \n            onSuggestionsFetchRequested : SuggestionsFetchRequested = ( {value}: SuggestionsFetchRequestedParams) => {\n                // console.log(\"onSuggestionsFetchRequested\")\n                this.getSuggestions(value)\n            };\n            \n            onSuggestionsClearRequested = () => {\n                this.setState({\n                    suggestions: []\n                });\n            };\n            //TEST\n            handleChange (event: ChangeEvent<HTMLInputElement>, ) : void {\n            // handleChange(event: React.FormEvent<IPoint>, params: ChangeEvent): void {\n            // handleChange {\n                // console.log(\"handleChange\")\n                // console.log(e.target.value)\n                // No longer need to cast to any - hooray for react!\n                this.setState({value: event.currentTarget.value});\n                // console.log(this.state.value)\n            }\n            \n            render() {\n                const { value, suggestions , isLoading } = this.state;\n                const inputProps : InputProps<dvb.IPoint>= {\n                    placeholder: this.props.placeholder,\n                    value,\n                    onChange: this.handleChange,\n                };\n                \n                return (\n                <div className=\"SearchStopField\">\n                    \n                        <Autosuggest\n                        suggestions= {suggestions}\n                        onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n                        onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n                        onSuggestionSelected={this.onSuggestionSelected}\n                        getSuggestionValue={getSuggestionValue}\n                        renderSuggestion={renderSuggestion}\n                        inputProps={inputProps}\n                        shouldRenderSuggestions={shouldRenderSuggestions}\n                        // renderInputComponent={this.renderInputComponent}\n                        />\n                        <FormLoadingSpinner isLoading={isLoading} />\n                        {/* <FormLoadingSpinner isLoading={true} /> */}\n            \n                </div>\n                    );\n                }\n            }","import React from 'react';\n\nimport {IPoint} from 'dvbjs';\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n// import { faPen } from '@fortawesome/free-solid-svg-icons'\n\n// interface IState {}\ninterface IProps {\n    stop: IPoint,\n    handleResetClick: ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void)\n}\n\nclass StopField extends React.Component<IProps> {\n    // constructor(props:IProps){\n    //     super(props);\n    // }\n    render(){\n        return (\n            <>\n                   <span>{this.props.stop.city} - {this.props.stop.name} </span>\n                   <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={this.props.handleResetClick}>\n                    <span aria-hidden=\"true\">&times;</span>\n                    {/* <FontAwesomeIcon size=\"xs\" icon={faPen} /> */}\n                    </button>\n<br/>\n                   <span className=\"small text-secondary\">(ID:{this.props.stop.id}) </span>\n                        \n            </>\n        )\n    }\n}\n\nexport default StopField;","import React from \"react\";\nimport { SearchStopField } from \"./SearchStopField\";\nimport StopField from \"./StopField\";\nimport { IPoint } from \"dvbjs\";\n\n\ninterface IState{\n    \n}\n\ninterface IProps{\n    title:string,\n    stop: IPoint | null,\n    placeholder: string,\n    handleNewSelectedStop:( stop_id: IPoint) => void,\n    handleResetClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\n}\n\nclass StopBox extends React.Component<IProps> {    \n    render() {\n        const stopField = this.props.stop ? <StopField stop={this.props.stop} handleResetClick={this.props.handleResetClick}/>: <SearchStopField placeholder={this.props.placeholder} handleNewSelectedStop={this.props.handleNewSelectedStop}/>\n        return (\n            <div>\n                <div className=\"card shadow-sm mb-2 bg-white rounded\">\n                    <div className=\"card-header\">{this.props.title}</div>\n                    <div className=\"card-body\">\n                        {stopField}\n                    </div>\n                </div>\n            </div>\n            )\n        }\n        \n    }\n    \n    export default StopBox","import React, { FunctionComponent } from 'react'\nimport { ITrip, IStopLocation, INode, IStop, IMode } from 'dvbjs'\nimport moment from 'moment';\nimport './RouteView.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPen, faChevronDown, faChevronUp, faCheckSquare } from '@fortawesome/free-solid-svg-icons'\n\nmoment.locale('de');\n\ninterface IState{\n    showDetails: boolean\n}\n\ninterface IProps{\n    trip: ITrip,\n    handleSelectedTrip: (trip:ITrip) => void,\n    handleEditTrip: ()=> void\n    selectable: boolean\n}\n// interface LineItemProps {\n//     node: INode\n// }\n\ninterface INodeTableRowsItemsProps {\n    stop: IStopLocation | IStop | undefined\n    stopType: \"DEPARTURE\" | \"ARRIVAL\" | \"STOPS\",\n    mode?: IMode,\n    line: string,\n    direction?: string,\n\n} \n\nconst NodeTableRowsItems = ({stop,stopType, mode, line, direction} : INodeTableRowsItemsProps) => {\n    if (!stop) {\n        return (<></>)\n    } else {\n        const stopName = `${stop!.city} - ${stop!.name}`\n        let abfahrt: string = \"\"\n        // if ('time' in stop) {\n        //     abfahrt = stop.time.toLocaleTimeString()\n        // }\n        if (('time' in stop) && (stopType === \"ARRIVAL\")){\n            abfahrt = RouteView.formatDate(stop.time) \n        }\n        if (('time' in stop) && (stopType === \"DEPARTURE\")){\n            abfahrt = RouteView.formatDate(stop.time) \n        }\n        if (('departure' in stop) && (stopType === \"STOPS\")){\n            abfahrt = RouteView.formatDate(stop.departure)\n        }\n        \n        const gleis = stop.platform && stopType !== \"STOPS\" ? stop.platform!.name : \"-\"\n\n        const richtung = direction ? direction! : \"\"\n        const linie = <NodeItem mode={mode} line={line}/>\n\n        return (\n            <tr>\n               \n                <td>\n                    {(stopType === \"STOPS\") ? abfahrt : <b>{abfahrt}</b> }\n                </td>\n                <td>\n                    {(stopType === \"STOPS\") ? stopName : <b>{stopName}</b> }\n                </td>\n                <td>\n                    {gleis}\n                </td>\n                <td>\n                    {(stopType === \"DEPARTURE\") ? linie : \"\"}\n                </td>\n                <td>\n                    {(stopType === \"DEPARTURE\") && richtung}\n                </td>\n            </tr>\n        )\n    }\n\n    \n}\n\ninterface INodeTableRowsProps {\n    node: INode\n}\n\nconst NodeTableRows = ({node}:INodeTableRowsProps) => {\n    const departureRow = <NodeTableRowsItems stop={node.departure} stopType=\"DEPARTURE\" line={node.line} mode={node.mode} direction={node.direction}/>\n    const arrivalRow =  <NodeTableRowsItems stop={node.arrival} line={node.line} stopType=\"ARRIVAL\"/>\n    const stopRows = node.stops.map((stop,index) => {\n        if ((index !== 0) && (index !== node.stops.length - 1)) {\n        return <NodeTableRowsItems line={node.line} stop={stop} stopType=\"STOPS\"/>\n        } else {\n            return <></>\n        }\n        \n    })  \n    const rows = [departureRow, stopRows, arrivalRow]\n    return (\n        <>\n        {rows}\n        </>\n    )\n}\n\ninterface IRouteDetailsProps {\n    RouteNodes: INode[]\n}\nclass RouteDetails extends React.Component<IRouteDetailsProps> {\n\n    render(){\n        const nodeViews = this.props.RouteNodes.map((node, index) => {\n            return <NodeTableRows node={node} key={index}/>\n        })\n        return (\n           <div className=\"table-responsive\">\n <table className=\"table table-sm\">\n               \n               <thead>\n               <tr>\n                   <th>Zeit</th>\n                   <th>Haltestelle</th>\n                   <th>Gleis</th>\n                   <th>Linie</th>\n                   <th>Richtung</th>\n                   \n                   </tr>  \n               </thead>\n          \n           <tbody>{nodeViews}</tbody>\n           \n       </table>\n   \n           </div>\n           )\n\n    }\n\n}\n\nconst NodeItem : FunctionComponent<{mode?: IMode, line: string }> = ({mode,line}) => {\n    let modeImage : JSX.Element\n    if (mode && mode!.iconUrl) {\n       modeImage = <img src ={mode!.iconUrl} alt={mode.title} className=\"nodeItemImage\"/>\n    }  else {\n        modeImage = <></>;\n    }\n    const lineName = line\n    return (\n        <span>\n            {modeImage}{lineName}\n        </span>\n    )\n}\n\nconst LineItems : FunctionComponent<{trip:ITrip}> = ({trip}) => {\n    let lines : JSX.Element[] = []\n    trip.nodes.forEach((node, index) =>{\n        if ((node.mode !== undefined) && \n            (node.mode!.name !== \"Footpath\") && \n            (node.mode!.name !== \"StairsUp\") &&\n            (node.mode!.name !== \"StairsDown\")\n            ) {\n            lines.push(<NodeItem mode={node.mode} line={node.line} key={index} />)\n            if (index < trip.nodes.length - 1 ) {\n                lines.push(<span> &#10095; </span>)\n            }\n        }\n    })\n    return (\n        <React.Fragment>\n            {lines}\n        </React.Fragment>)\n}\n\nconst StopItem : FunctionComponent<{stopLocation: IStopLocation|undefined}> = ({stopLocation}) =>  {\n    if (stopLocation) {\n        return ( \n            <span>{stopLocation!.city} - {stopLocation!.name} </span> \n        )\n    } else {\n        return (<span>unknown</span>)\n    }\n} \n\n\nclass RouteView extends React.Component<IProps, IState> {\n    // constructor(props:IProps){\n    //     super(props)\n    // }\n    constructor(props:IProps){\n        super(props)\n        this.state = {\n            showDetails: false\n        }\n        this.handleSelectRoute = this.handleSelectRoute.bind(this)\n        this.handleEditTrip = this.handleEditTrip.bind(this)\n        this.toggleShowDetails = this.toggleShowDetails.bind(this)\n    }\n    \n    static formatDate(date: Date) : string {\n        // if (stopLocation) {\n            const format = \"HH:mm\"\n            const dateString = moment(date).format(format)\n            return dateString\n        // } else {\n        //     return \"Keine Zeitangabe\"\n        // }\n    } \n    toggleShowDetails(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n        this.setState({showDetails: !this.state.showDetails})\n    }\n    \n\n    handleSelectRoute(event: React.FormEvent<HTMLButtonElement>) :void {\n        this.props.handleSelectedTrip(this.props.trip)\n    }\n    handleEditTrip(event: React.FormEvent<HTMLButtonElement>) :void {\n        this.props.handleEditTrip()\n    }\n    \n\n    render(){\n        const showDetails = this.state.showDetails\n        const trip = this.props.trip\n\n        const departure = trip.departure ? RouteView.formatDate(trip.departure!.time) : \"Keine Zeitangabe\"\n        const arrival = trip.arrival ? RouteView.formatDate(trip.arrival!.time) : \"Keine Zeitangabe\"\n        const dauer =  moment(new Date(0,0,0,0,trip.duration)).format(\"HH:mm\")\n        const umstiege = trip.interchanges \n        const isSelectable = this.props.selectable\n        \n        return (\n            <div className=\"row\">\n                \n                <div className=\"card col-sm-12 shadow-sm mb-2 rounded\">\n                    {/* <h4 className=\"card-header\">{this.props.title}</h4> */}\n                    <div className=\"card-body\">\n                       <table className=\"routeViewTable\">\n                           <thead>\n                               <tr>\n                                    <th className=\"bhf\">Bahnhof/Haltestelle</th>\n                                    <th className=\"zeit\">Zeit</th>\n                                    <th className=\"dauer\">Dauer\t</th>\n                                    <th className=\"umst\">Umstiege</th>\n                                    <th className=\"prod\">Produkte</th>\n                                    <th className=\"select\"></th>\n                               </tr>\n\n                           </thead>\n                          <tbody>\n                          <tr>\n                               <td>\n                               <StopItem stopLocation={trip.departure}/><br/>\n                               <StopItem stopLocation={trip.arrival}/><br/>\n                               </td>\n                               <td>\n                                   {departure}<br/>\n                                   {arrival}\n                               </td>\n                               <td>\n                                   {/* DAUER */}\n                                   {dauer}\n                               </td>\n                               <td>\n                                   {/* Umstiege */}\n                                   {umstiege}\n                               </td>\n                               <td>\n                                   {/* Linien */}\n                                   <LineItems trip={trip} />\n                               </td>\n                               <td> \n                                   {/* Buttons */}\n                                   \n                                   { isSelectable \n                                   ? <button type=\"button\" className=\"m-1 btn btn-primary\" value=\"\" onClick={this.handleSelectRoute}> <FontAwesomeIcon icon={faCheckSquare} /> auswählen</button> : \n                                   <button type=\"button\" className=\"m-1 btn btn-secondary btn-sm\" value=\"\" onClick={this.handleEditTrip}> <FontAwesomeIcon icon={faPen}  /> Ändern </button> }\n                                   <button type=\"button\" className=\"m-1 btn btn-sm btn-secondary\" onClick={this.toggleShowDetails}>\n                                   <FontAwesomeIcon  icon={showDetails ? faChevronUp : faChevronDown }  />\n                                    Zwischenhalte\n                                   </button>\n\n                               </td>\n                           </tr>\n                          </tbody>\n                         \n                       </table>\n                        {showDetails && \n                        <RouteDetails RouteNodes={trip.nodes} />}\n                    </div>\n                </div>\n               \n            </div>\n            )\n        }\n        \n    }\n    \n    export default RouteView \n    \n    \n    ","import React from \"react\";\nimport { IPoint, IRoute,route, ITrip } from \"dvbjs\";\nimport RouteView from \"./RouteView\";\n// import moment from \"moment\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons'\n\n\n\ninterface IState {\n    fetchedRoutes: IRoute | null\n    isLoading: boolean\n}\n\ninterface IProps {\n    fromStop: IPoint | null,\n    toStop: IPoint| null,\n    viaStop: IPoint| null,\n    selectedTrip: ITrip | null\n    dateTime: Date\n    handleSelectedTrip: (trip:ITrip) => void\n    handleEditTrip: ()=>void\n}\n\nclass Routes extends React.Component<IProps, IState> {\n    constructor(props:IProps){\n        super(props)\n        this.state = {\n            fetchedRoutes: null,\n            isLoading:false\n        }\n    }\n    fetchRoutes(){\n         \n        const from = this.props.fromStop\n        const to = this.props.toStop \n        const via = this.props.viaStop ? this.props.viaStop!.id : undefined\n        const date = this.props.dateTime\n        //DEBUG\n        console.log(this.props.viaStop)\n        // console.log(via)\n        //END DEBUG\n        // const timezoneOffset = datetimeLocale.getTimezoneOffset()\n        // const isoDate = moment(datetimeLocale).add(-timezoneOffset, 'm').toDate()\n        // const isoDate = datetimeLocale\n        \n        // console.log(date.toISOString())\n        if (from && to) {    \n            this.setState({isLoading: true})        \n            route(from!.id,to!.id, date, false, undefined , via)\n            .then(route => {\n                this.setState({fetchedRoutes: route,\n                isLoading:false})\n                // console.log(route)\n            })\n            .catch(err=>console.log)\n        }        \n    }\n    componentDidUpdate(prevProps:IProps){\n        if (\n            this.props.toStop !== prevProps.toStop || \n            this.props.fromStop !== prevProps.fromStop || \n            this.props.dateTime !== prevProps.dateTime ||\n            this.props.viaStop !== prevProps.viaStop) {\n            this.fetchRoutes()\n        }\n    }\n\n    componentDidMount(){\n        if (this.props.toStop && this.props.fromStop) {\n            this.fetchRoutes()\n        }\n\n    }\n\n    render(){\n        const fetchedRoutes = this.state.fetchedRoutes; \n        \n        \n\n        let content;\n        if (this.props.selectedTrip) {\n            const trip = this.props.selectedTrip\n            content = <RouteView trip={trip} handleSelectedTrip={(e)=>{}} selectable={false} handleEditTrip={this.props.handleEditTrip}/>\n        } else {\n            if (this.props.dateTime && this.props.fromStop && this.props.toStop) {\n                if (this.state.isLoading) {\n                  const spinner = <div className=\"LoadingSpinner text-center\"><span className=\"align-middle\"><FontAwesomeIcon icon={faSpinner} size=\"3x\" pulse={true}/></span></div>\n                    content = spinner\n                } else {\n                  const routeItems = fetchedRoutes?.trips.map((trip, index) =>\n                  <RouteView selectable={true} trip={trip} key={index} handleSelectedTrip={this.props.handleSelectedTrip} handleEditTrip={()=>{}} />\n                  );\n                  content = routeItems\n                }\n              } else {\n                content = <></>\n              }\n        }\n        \n\n        return (\n            <div>\n                {content}\n            </div>\n          \n        )\n    }\n}\n\nexport default Routes","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPen, faTrash,faPlus } from '@fortawesome/free-solid-svg-icons'\n\ninterface IProps {\n\n}\n\ninterface IState{\n\n}\n\nclass Reisende extends React.Component<IProps> {\n    // constructor(props:IProps){\n    //     super(props)\n    // }\n\n    render(){\n        return (\n            <div className=\"row\">\n               <div className=\"card col-sm-12 shadow-sm mb-2 rounded\">\n                  <div className=\"card-body\">\n                  <h2 className=\"card-title\">Wähle Reisende:</h2>\n                    <table className=\"table\">\n                        <thead>\n                            <tr>\n                                <th>\n                                    Reisende\n                                </th>\n                                <th>\n                                    Fahrgasttyp\n                                </th>\n                                <th>\n                                    Aktionen\n                                </th>\n                            </tr>\n                        </thead>\n                        <tr>\n                            <td>Reisender 1</td>\n                            <td>Erwachsener/Vollzahler</td>\n                            <td><button type=\"button\" className=\"btn btn-secondary btn-sm\" disabled> <FontAwesomeIcon icon={faPen}  /> Ändern</button> \n                  <button type=\"button\" className=\"btn btn-danger btn-sm\" disabled> <FontAwesomeIcon icon={faTrash}  /> Löschen </button></td>\n                        </tr> \n                        <tr>\n                            <td><button type=\"button\" className=\"btn btn-success btn-sm\" disabled> <FontAwesomeIcon icon={faPlus}  /> weitere Reisende hinzufügen </button></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n\n                    </table>\n                  </div>\n                  \n               </div>\n               \n            </div>\n        )\n    }\n\n}\n\nexport default Reisende \n\n\n","import React from 'react'\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n// import { faPen, faTrash,faPlus } from '@fortawesome/free-solid-svg-icons'\nimport Select, { ValueType, ActionMeta, OptionsType } from 'react-select'\nimport {Ticket, ITicketItems} from 'vvo-testcases'\n// import { Preisstufe, Produkt } from 'vvo-testcases/build/src/tickets'\n\ninterface IProps {\n    handleProductsChange: (tickets: Ticket[]) => void\n}\n\ninterface IState{\n\n}\n\n\nclass Tarifangebot extends React.Component<IProps> {\n    // constructor(props:IProps){\n    //     super(props)\n    // }\n\n\n    tickets = Ticket.getAllProducts()\n    \n    handleNewSelectedProducts(value: OptionsType<ITicketItems>, actionMeta: ActionMeta<ITicketItems>): void{\n        if (value) {\n            const angebot = value.map((item) => {\n                return new Ticket(item.produkt, item.preisstufe)\n            })\n            this.props.handleProductsChange(angebot)\n        }\n        \n    }\n\n    render(){\n        const options = this.tickets \n        return (\n            <div>\n\n\n            <div>\n                \n            </div>\n            <div className=\"row\">\n               <div className=\"card col-sm-12 shadow-sm mb-2 rounded\">\n                  <div className=\"card-body\">\n                    <h2 className=\"card-title\">SOLL-Tarifangebot</h2>\n                    <table className=\"table\">\n                        <thead>\n                            <tr>\n                                <th style={{width: \"15%\"}}>\n                                    Reisende\n                                </th>\n                                <th style={{width: \"85%\"}}>\n                                    Tarifangebot\n                                </th>\n                            </tr>\n                        </thead>\n                        <tr>\n                            <td>Reisender 1</td>\n                            <td><Select options={options} isMulti onChange={(selectedOption: ValueType<ITicketItems>, e: ActionMeta<ITicketItems>) => this.handleNewSelectedProducts((selectedOption as ITicketItems[]), e)}/></td>\n                        </tr> \n\n                    </table>\n                  </div>\n                  \n               </div>\n               \n            </div>\n            </div>\n        )\n    }\n\n}\n\nexport default Tarifangebot \n\n\n","// import { saveAs } from 'file-saver';\nimport save from 'save-file'\nimport { Tester, ITestArguments } from 'vvo-testcases';\nimport { ITrip } from 'dvbjs';\n\nfunction getFilename(trip:ITrip):string {\n    const timeStamp = trip.departure ? trip.departure.time : new Date()\n    const timeStampString = timeStamp.toISOString()\n        .replace(/T/, '-')      // replace T with a -\n        .replace(/\\..+/, '')     // delete the dot and everything after\n    const from = trip.departure ? `${trip.departure!.city}${trip.departure!.name}` : \"Unknown Stop\"\n    const to = trip.arrival ? `${trip.arrival!.city}${trip.arrival!.name}` : \"Unknown Stop\"\n\n    return timeStampString + \"_\" + from + \"_\" + to + \".xlsx\"\n\n}\n\n\nexport function savetoFile(testCase: ITestArguments){\n    const fileName = getFilename(testCase.trip)\n    const tester = new Tester()\n    tester.exportSingleTestCase(testCase)\n    .then(async (buffer) =>  {\n        await save(buffer, fileName)\n    })\n}","import React, { useState } from 'react';\n\nimport Button from 'react-bootstrap/Button';\nimport Collapse from 'react-bootstrap/Collapse'\n// import {SearchStopField} from './SearchStopField'\nimport { IPoint, ITrip } from 'dvbjs';\n// import StopField from './StopField'\nimport StopBox from './StopBox';\nimport Routes from './Routes';\nimport Datetime from 'react-datetime';\n// import logo from './logo.svg';\nimport './App.css';\nimport './DateTimePicker.css'\nimport * as moment from 'moment';\nimport Reisende from './Reisende';\nimport Tarifangebot from './Tarifangebot';\nimport { Ticket, Fahrgast, ITestArguments } from 'vvo-testcases';\nimport {savetoFile} from './saveToFile'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faFileDownload, faPaperPlane, faChevronUp, faChevronDown} from '@fortawesome/free-solid-svg-icons'\n\n interface IState {\n  fromStop: IPoint | null,\n  toStop:  IPoint | null,\n  viaStop: IPoint | null,\n  selectedTrip: ITrip | null,\n  tripDateTime : Date,\n  angebote : Ticket[][], \n  fahrgaeste: Fahrgast[],\n}\ninterface RoutingOptionsProps {\n  content: React.ReactNode\n}\n\nfunction RoutingOptions({content}: RoutingOptionsProps) {\n  // const [open, setOpen] = useState(false);\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  // const content = props.content\n  return (\n    <>\n    <Collapse in={isOpen} timeout={50} >\n        <div id=\"example-collapse-text\" className=\"row\">\n              {content}  \n        </div>\n      </Collapse>\n      <Button\n        onClick={() => setIsOpen( !isOpen)}\n        aria-controls=\"example-collapse-text\"\n        aria-expanded={isOpen}\n        size=\"sm\"\n        className=\"m-1\"\n        variant=\"light\"\n        block\n      >\n        {/* <FontAwesomeIcon icon={faWrench} fixedWidth/> */}\n        <FontAwesomeIcon icon={isOpen ? faChevronUp : faChevronDown } fixedWidth/>\n        Erweiterte Verbindungseinstellungen\n      \n      </Button>\n      \n    </>\n  );\n}\n\n\n\n// type stateKeys = \"fromStop\" | \"toStop\"\ninterface UseTestCaseComponentProps {\n  handleExportToFile: (event: React.FormEvent<HTMLButtonElement>) => void\n}\n\nconst UseTestCaseComponent = ({handleExportToFile}: UseTestCaseComponentProps) => (\n  <div className=\"row\">\n    <div className=\"card col-sm-12 shadow-sm mb-2 rounded\">\n      <div className=\"card-body\">\n        <h2 className=\"card-title\">Verwende Testfall</h2>\n        <div className=\"row\">\n         <div className=\"col-sm-6 text-center\">\n              <button className=\"btn btn-lg btn-primary m-4\" onClick={handleExportToFile}>\n                  <FontAwesomeIcon icon={faFileDownload} size=\"lg\"/><br/> \n                  Exportiere Testfall<br/>\n                  <small>IVI-Format (*.xlsx)</small> \n              </button>\n          </div>\n          <div className=\"col-sm-6 text-center\">\n            <button className=\"btn btn-lg btn-info m-4\" disabled>\n              <FontAwesomeIcon icon={faPaperPlane} size=\"lg\"/> <br/>\n              Frage Tarifrechner an<br/>\n              <small>(JSON-Request)</small>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n)\n\n\nclass App extends React.Component<{}, IState> {\n  constructor(props:{}){\n    super(props);\n\n    // DEBUG\n    // const start:IPoint = {city: \"Radebeul\", coords: [13.6741369627676, 51.10381758791261], name: \"Schildenstraße\", id: \"33004218\", type: POI_TYPE.Stop}\n    // const ziel: IPoint = {\n    //   city: \"Bad Schandau\",\n    //   coords: [14.149447444887771, 50.91775830470602],\n    //   id: \"33003621\",\n    //   name: \"Elbkai\",\n    //   type: POI_TYPE.Stop\n    // }\n    // END DEBUG\n    this.state = {\n        fromStop: null,\n        toStop: null,\n        viaStop: null,\n        selectedTrip: null,\n        tripDateTime: new Date(),\n        angebote: [],\n        fahrgaeste: [new Fahrgast(33, {nr: 1, name: \"Erwachsener/Vollzahler/jedermann\"})]\n    };\n    this.handleNewSelectedFromStop = this.handleNewSelectedFromStop.bind(this)\n    this.handleResetClickForFromStop = this.handleResetClickForFromStop.bind(this)\n    this.handleNewSelectedToStop = this.handleNewSelectedToStop.bind(this)\n    this.handleResetClickForToStop = this.handleResetClickForToStop.bind(this)\n    this.handleNewSelectedViaStop = this.handleNewSelectedViaStop.bind(this)\n    this.handleResetClickForViaStop = this.handleResetClickForViaStop.bind(this)\n    this.handelNewDate = this.handelNewDate.bind(this)\n    this.handleSelectedTrip = this.handleSelectedTrip.bind(this)\n    this.handleEditTrip = this.handleEditTrip.bind(this)\n    this.handleProductsChange = this.handleProductsChange.bind(this)\n    this.handleExportToFile = this.handleExportToFile.bind(this)\n  }\n\n  handleExportToFile(event: React.FormEvent<HTMLButtonElement>) {\n    const testCase: ITestArguments = {\n      nr: 1,\n      trip: this.state.selectedTrip!,\n      fahrgaeste: this.state.fahrgaeste,\n      angebote: this.state.angebote\n    }\n    \n    savetoFile(testCase)\n  }\n\n  handleNewSelectedFromStop(stop_id:IPoint) {\n    this.setState({fromStop: stop_id})\n  } \n  handleNewSelectedToStop(stop_id:IPoint) {\n    this.setState({toStop: stop_id})\n  } \n  handleNewSelectedViaStop(stop_id:IPoint) {\n    this.setState({viaStop: stop_id})\n  } \n\n  handleResetClickForToStop(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    this.setState({toStop: null})\n  }\n  handleResetClickForFromStop(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    this.setState({fromStop: null})\n  }\n  handleResetClickForViaStop(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    this.setState({toStop: null})\n  }\n  handelNewDate(value :string|moment.Moment){\n    if (moment.isMoment(value)){\n      this.setState({tripDateTime: value.toDate()}) \n    }\n  }\n\n  handleProductsChange(tickets: Ticket[]):void {\n    \n    const arrayOfTickets :Ticket[][] = []\n    tickets.forEach(ticket =>{\n      arrayOfTickets.push([ticket])\n    })\n    this.setState({angebote: arrayOfTickets})\n    // console.log(tickets)\n  }\n\n  handleSelectedTrip(trip: ITrip) {\n    // console.log(trip)\n    this.setState({selectedTrip: trip})\n  }\n\n  handleEditTrip() {\n    this.setState({selectedTrip: null})\n  }\n    render () {\n\n      const isTripSelected = this.state.selectedTrip ? true : false\n      \n        \n        return (      \n        <div className=\"container\">\n          <h1>Testfallgenerator\n        <small className=\"text-muted\"> für VVO-Tarifrechner</small> </h1>\n        <h2>1. Wähle eine Verbindung:</h2>\n        { !isTripSelected &&\n        \n        <div className=\"row\">\n          \n          <div className=\"col-sm-4\">\n            <StopBox \n            handleNewSelectedStop={this.handleNewSelectedFromStop}\n            handleResetClick={this.handleResetClickForFromStop}\n            title=\"Von\"\n            placeholder=\"Start\"\n            stop={this.state.fromStop} />\n          </div>\n          <div className=\"col-sm-4\">\n            <StopBox \n            handleNewSelectedStop={this.handleNewSelectedToStop}\n            handleResetClick={this.handleResetClickForToStop}\n            title=\"Nach\"\n            placeholder=\"Ziel\"\n            stop={this.state.toStop} />\n          </div>\n          <div className=\"col-sm-4\">\n            {/* <Datetime onChange={this.handelNewDate} value={this.state.tripDateTime} />  \n             */}\n             <div className=\"card shadow-sm mb-2 bg-white rounded\">\n                    <div className=\"card-header\">Abfahrt</div>\n                    <div className=\"card-body\">\n                      <Datetime onChange={this.handelNewDate} dateFormat=\"DD.MM.YYYY\" timeFormat=\"HH:mm\" value={this.state.tripDateTime}/>\n                    </div>\n                </div>\n          </div>\n        </div>}\n        { !isTripSelected &&\n        <RoutingOptions content={\n          <div className=\"col-sm-4\">\n          <StopBox \n          handleNewSelectedStop={this.handleNewSelectedViaStop}\n          handleResetClick={this.handleResetClickForViaStop}\n          title=\"Via\"\n          placeholder=\"Zwischenstop\"\n          stop={this.state.viaStop} />\n        </div>\n        }/>}\n          < Routes \n            fromStop={this.state.fromStop}\n            toStop={this.state.toStop}\n            viaStop={this.state.viaStop}\n            selectedTrip={this.state.selectedTrip}\n            dateTime={this.state.tripDateTime}\n            handleSelectedTrip={this.handleSelectedTrip}\n            handleEditTrip={this.handleEditTrip}/>\n      \n      {isTripSelected && \n      <Reisende/>}\n      {isTripSelected &&\n      <Tarifangebot handleProductsChange={this.handleProductsChange}/>}\n      {isTripSelected &&\n      <UseTestCaseComponent handleExportToFile={this.handleExportToFile} />}\n      </div>\n      )\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n/* eslint @typescript-eslint/explicit-module-boundary-types: 0 */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dateDifference = exports.extractTrip = exports.parsePoiID = exports.parseMode = exports.parsePin = exports.parseConnections = exports.MODES = exports.parsePlatform = exports.parseDiva = exports.parseDate = exports.convertError = exports.constructError = exports.checkStatus = exports.convertCoordinates = exports.WmOrGK4toWGS84 = exports.WGS84toWm = exports.WGS84toGK4 = void 0;\nconst proj4_1 = __importDefault(require(\"proj4\"));\nconst interfaces_1 = require(\"./interfaces\");\n// EPSG:31468\nproj4_1.default.defs(\"GK4\", \"+proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs\");\n// EPSG:3857\nproj4_1.default.defs(\"WM\", \"+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\nfunction WGS84toGK4(lng, lat) {\n    return proj4_1.default(\"WGS84\", \"GK4\", [lng, lat]).map(Math.round);\n}\nexports.WGS84toGK4 = WGS84toGK4;\nfunction WGS84toWm(lng, lat) {\n    return proj4_1.default(\"WGS84\", \"WM\", [lng, lat]).map(Math.round);\n}\nexports.WGS84toWm = WGS84toWm;\nfunction WmOrGK4toWGS84(lng, lat) {\n    const latInt = parseInt(lat, 10);\n    const lngInt = parseInt(lng, 10);\n    if (latInt === 0 && lngInt === 0) {\n        return undefined;\n    }\n    if (isNaN(latInt) || isNaN(lngInt)) {\n        return undefined;\n    }\n    if (lngInt < 2500000) {\n        return proj4_1.default(\"WM\", \"WGS84\", [lngInt, latInt]);\n    }\n    else {\n        return proj4_1.default(\"GK4\", \"WGS84\", [lngInt, latInt]);\n    }\n}\nexports.WmOrGK4toWGS84 = WmOrGK4toWGS84;\nfunction convertCoordinates(s) {\n    const coords = [];\n    if (s) {\n        const gk4Chords = s.split(\"|\");\n        let i = 1;\n        const len = gk4Chords.length - 1;\n        while (i < len) {\n            const coordinate = WmOrGK4toWGS84(gk4Chords[i + 1], gk4Chords[i]);\n            if (coordinate) {\n                coords.push(coordinate);\n            }\n            i += 2;\n        }\n    }\n    return coords;\n}\nexports.convertCoordinates = convertCoordinates;\nfunction checkStatus(data) {\n    if (!data || !data.Status) {\n        throw new Error(\"unexpected error\");\n    }\n    if (data.Status.Code !== \"Ok\") {\n        const error = new Error(data.Status.Message);\n        error.name = data.Status.Code;\n        throw error;\n    }\n}\nexports.checkStatus = checkStatus;\nfunction constructError(name, message = \"\") {\n    const error = new Error(message);\n    if (name) {\n        error.name = name;\n    }\n    return error;\n}\nexports.constructError = constructError;\nfunction convertError(err) {\n    if (err.response && err.response.data && err.response.data.Status) {\n        throw constructError(err.response.data.Status.Code, err.response.data.Status.Message);\n    }\n    throw err;\n}\nexports.convertError = convertError;\nfunction parseDate(d) {\n    const matches = d.match(/\\d+/);\n    if (matches) {\n        return new Date(parseInt(matches[0], 10));\n    }\n    return new Date();\n}\nexports.parseDate = parseDate;\nfunction parseDiva(d) {\n    return d && d.Number\n        ? { number: parseInt(d.Number, 10), network: d.Network }\n        : undefined;\n}\nexports.parseDiva = parseDiva;\nfunction parsePlatform(p) {\n    return p ? { name: p.Name, type: p.Type } : undefined;\n}\nexports.parsePlatform = parsePlatform;\nfunction pinType(str) {\n    switch (str) {\n        case \"\":\n            return interfaces_1.PIN_TYPE.stop;\n        case \"p\":\n            return interfaces_1.PIN_TYPE.poi;\n        case \"pf\":\n            return interfaces_1.PIN_TYPE.platform;\n        case \"pr\":\n            return interfaces_1.PIN_TYPE.parkandride;\n        case \"r\":\n            return interfaces_1.PIN_TYPE.rentabike;\n        case \"c\":\n            return interfaces_1.PIN_TYPE.carsharing;\n        case \"t\":\n            return interfaces_1.PIN_TYPE.ticketmachine;\n    }\n    return interfaces_1.PIN_TYPE.unknown;\n}\nexports.MODES = {\n    Tram: {\n        title: \"Straßenbahn\",\n        name: \"Tram\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-tram.svg\",\n    },\n    CityBus: {\n        title: \"Bus\",\n        name: \"CityBus\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-bus.svg\",\n    },\n    IntercityBus: {\n        title: \"Regio-Bus\",\n        name: \"IntercityBus\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-bus.svg\",\n    },\n    SuburbanRailway: {\n        title: \"S-Bahn\",\n        name: \"SuburbanRailway\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-metropolitan.svg\",\n    },\n    Train: {\n        title: \"Zug\",\n        name: \"Train\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-train.svg\",\n    },\n    Cableway: {\n        title: \"Seil-/Schwebebahn\",\n        name: \"Cableway\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-lift.svg\",\n    },\n    Ferry: {\n        title: \"Fähre\",\n        name: \"Ferry\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-ferry.svg\",\n    },\n    HailedSharedTaxi: {\n        title: \"Anrufsammeltaxi (AST)/ Rufbus\",\n        name: \"HailedSharedTaxi\",\n        iconUrl: \"https://www.dvb.de/assets/img/trans-icon/transport-alita.svg\",\n    },\n    Footpath: {\n        title: \"Fussweg\",\n        name: \"Footpath\",\n        iconUrl: \"https://m.dvb.de/img/walk.svg\",\n    },\n    StairsUp: {\n        title: \"Treppe aufwärts\",\n        name: \"StairsUp\",\n        iconUrl: \"https://m.dvb.de/img/stairs-up.svg\",\n    },\n    StairsDown: {\n        title: \"Treppe abwärts\",\n        name: \"StairsDown\",\n        iconUrl: \"https://m.dvb.de/img/stairs-down.svg\",\n    },\n    EscalatorUp: {\n        title: \"Rolltreppe aufwärts\",\n        name: \"EscalatorUp\",\n        iconUrl: \"https://m.dvb.de/img/escalator-up.svg\",\n    },\n    EscalatorDown: {\n        title: \"Rolltreppe abwärts\",\n        name: \"EscalatorDown\",\n        iconUrl: \"https://m.dvb.de/img/escalator-down.svg\",\n    },\n    ElevatorUp: {\n        title: \"Fahrstuhl aufwärts\",\n        name: \"ElevatorUp\",\n        iconUrl: \"https://m.dvb.de/img/elevator-up.svg\",\n    },\n    ElevatorDown: {\n        title: \"Fahrstuhl abwärts\",\n        name: \"ElevatorDown\",\n        iconUrl: \"https://m.dvb.de/img/elevator-down.svg\",\n    },\n    StayForConnection: {\n        title: \"gesicherter Anschluss\",\n        name: \"StayForConnection\",\n        iconUrl: \"https://m.dvb.de/img/sit.svg\",\n    },\n    PlusBus: {\n        title: \"PlusBus\",\n        name: \"PlusBus\",\n        iconUrl: \"https://m.dvb.de/img/mot_icons/plusBus.svg\",\n    },\n};\nfunction connectionType(str) {\n    switch (str) {\n        case \"1\":\n            return exports.MODES.Tram;\n        case \"2\":\n            return exports.MODES.CityBus;\n        case \"3\":\n            return exports.MODES.IntercityBus;\n        case \"4\":\n            return exports.MODES.Train;\n        case \"5\":\n            return exports.MODES.SuburbanRailway;\n        case \"6\":\n            return exports.MODES.HailedSharedTaxi;\n        case \"7\":\n            return exports.MODES.Ferry;\n        case \"8\":\n            return exports.MODES.Cableway;\n        case \"10\":\n            return exports.MODES.PlusBus;\n        default:\n            return undefined;\n    }\n}\nfunction parseConnections(data) {\n    let connections = [];\n    data.split(\"#\").forEach((types) => {\n        if (!types) {\n            return [];\n        }\n        const typesArray = types.split(\":\");\n        const mode = connectionType(typesArray[0]);\n        connections = connections.concat(typesArray[1].split(\"~\").map((line) => ({\n            line,\n            mode,\n        })));\n    });\n    return connections;\n}\nexports.parseConnections = parseConnections;\nfunction parsePin(dataAsString) {\n    const data = dataAsString.split(\"|\");\n    const coords = WmOrGK4toWGS84(data[5], data[4]) || [];\n    const type = pinType(data[1]);\n    if (type === interfaces_1.PIN_TYPE.platform) {\n        return {\n            coords,\n            id: data[0],\n            name: data[3],\n            platformNr: data[6],\n            type,\n        };\n    }\n    if (type === interfaces_1.PIN_TYPE.poi ||\n        type === interfaces_1.PIN_TYPE.rentabike ||\n        type === interfaces_1.PIN_TYPE.ticketmachine ||\n        type === interfaces_1.PIN_TYPE.carsharing ||\n        type === interfaces_1.PIN_TYPE.unknown) {\n        return {\n            coords,\n            id: data[0],\n            name: data[3],\n            type,\n        };\n    }\n    if (type === interfaces_1.PIN_TYPE.parkandride) {\n        return {\n            coords,\n            id: data[0],\n            name: data[3],\n            info: data[6],\n            type,\n        };\n    }\n    // 'stop' id default\n    return {\n        coords,\n        id: data[0],\n        name: data[3],\n        connections: parseConnections(data[7]),\n        type,\n    };\n}\nexports.parsePin = parsePin;\nfunction parseMode(name) {\n    if (!name) {\n        return undefined;\n    }\n    switch (name.toLowerCase()) {\n        case \"tram\":\n            return exports.MODES.Tram;\n        case \"bus\":\n        case \"citybus\":\n            return exports.MODES.CityBus;\n        case \"intercitybus\":\n            return exports.MODES.IntercityBus;\n        case \"suburbanrailway\":\n            return exports.MODES.SuburbanRailway;\n        case \"train\":\n        case \"rapidtransit\":\n            return exports.MODES.Train;\n        case \"footpath\":\n            return exports.MODES.Footpath;\n        case \"cableway\":\n        case \"overheadrailway\":\n            return exports.MODES.Cableway;\n        case \"ferry\":\n            return exports.MODES.Ferry;\n        case \"hailedsharedtaxi\":\n            return exports.MODES.HailedSharedTaxi;\n        case \"mobilitystairsup\":\n            return exports.MODES.StairsUp;\n        case \"mobilitystairsdown\":\n            return exports.MODES.StairsDown;\n        case \"mobilityescalatorup\":\n            return exports.MODES.EscalatorUp;\n        case \"mobilityescalatordown\":\n            return exports.MODES.EscalatorDown;\n        case \"mobilityelevatorup\":\n            return exports.MODES.ElevatorUp;\n        case \"mobilityelevatordown\":\n            return exports.MODES.ElevatorDown;\n        case \"stayforconnection\":\n            return exports.MODES.StayForConnection;\n        case \"plusbus\":\n            return exports.MODES.PlusBus;\n        default:\n            return {\n                name,\n                title: name.toLowerCase(),\n            };\n    }\n}\nexports.parseMode = parseMode;\nfunction parsePoiID(id) {\n    let poiId = id.split(\":\");\n    if (poiId.length >= 4) {\n        poiId = poiId.slice(0, 4);\n        switch (poiId[0]) {\n            case \"streetID\":\n                return {\n                    id: poiId.join(\":\"),\n                    type: interfaces_1.POI_TYPE.Address,\n                };\n            case \"coord\":\n                return {\n                    id: poiId.join(\":\"),\n                    type: interfaces_1.POI_TYPE.Coords,\n                };\n            case \"poiID\":\n                return {\n                    id: poiId.join(\":\"),\n                    type: interfaces_1.POI_TYPE.POI,\n                };\n        }\n    }\n    return {\n        id,\n        type: interfaces_1.POI_TYPE.Stop,\n    };\n}\nexports.parsePoiID = parsePoiID;\nfunction extractStop(stop) {\n    return {\n        id: stop.DataId,\n        name: stop.Name.trim(),\n        city: stop.Place,\n        type: stop.Type,\n        platform: parsePlatform(stop.Platform),\n        coords: WmOrGK4toWGS84(stop.Longitude, stop.Latitude) || [0, 0],\n        arrival: parseDate(stop.ArrivalTime),\n        departure: parseDate(stop.DepartureTime),\n    };\n}\nfunction extractNode(node, mapData) {\n    const stops = node.RegularStops\n        ? node.RegularStops.map(extractStop)\n        : [];\n    let departure;\n    let arrival;\n    if (stops && stops.length > 1) {\n        const firstStop = stops[0];\n        const lastStop = stops[stops.length - 1];\n        departure = {\n            id: firstStop.id,\n            name: firstStop.name,\n            city: firstStop.city,\n            platform: firstStop.platform,\n            time: firstStop.departure,\n            coords: firstStop.coords,\n            type: firstStop.type,\n        };\n        arrival = {\n            id: lastStop.id,\n            name: lastStop.name,\n            city: lastStop.city,\n            platform: lastStop.platform,\n            time: lastStop.arrival,\n            coords: lastStop.coords,\n            type: lastStop.type,\n        };\n    }\n    return {\n        stops,\n        departure,\n        arrival,\n        mode: parseMode(node.Mot.Type),\n        line: node.Mot.Name ? node.Mot.Name : \"\",\n        direction: node.Mot.Direction ? node.Mot.Direction.trim() : \"\",\n        diva: parseDiva(node.Mot.Diva),\n        duration: node.Duration || 1,\n        path: convertCoordinates(mapData[node.MapDataIndex]),\n    };\n}\nfunction extractTrip(trip) {\n    const nodes = trip.PartialRoutes.map((node) => extractNode(node, trip.MapData));\n    return {\n        nodes,\n        departure: nodes[0].departure,\n        arrival: nodes[nodes.length - 1].arrival,\n        duration: trip.Duration || 1,\n        interchanges: trip.Interchanges,\n    };\n}\nexports.extractTrip = extractTrip;\nfunction dateDifference(start, end) {\n    return Math.round((end.getTime() - start.getTime()) / 1000 / 60);\n}\nexports.dateDifference = dateDifference;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar coords_1 = require(\"./coords\");\nObject.defineProperty(exports, \"coords\", { enumerable: true, get: function () { return coords_1.coords; } });\nvar find_1 = require(\"./find\");\nObject.defineProperty(exports, \"findAddress\", { enumerable: true, get: function () { return find_1.findAddress; } });\nObject.defineProperty(exports, \"findPOI\", { enumerable: true, get: function () { return find_1.findPOI; } });\nObject.defineProperty(exports, \"findStop\", { enumerable: true, get: function () { return find_1.findStop; } });\nvar lines_1 = require(\"./lines\");\nObject.defineProperty(exports, \"lines\", { enumerable: true, get: function () { return lines_1.lines; } });\nvar monitor_1 = require(\"./monitor\");\nObject.defineProperty(exports, \"monitor\", { enumerable: true, get: function () { return monitor_1.monitor; } });\nvar pins_1 = require(\"./pins\");\nObject.defineProperty(exports, \"pins\", { enumerable: true, get: function () { return pins_1.pins; } });\nvar route_1 = require(\"./route\");\nObject.defineProperty(exports, \"route\", { enumerable: true, get: function () { return route_1.route; } });\n__exportStar(require(\"./interfaces\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PIN_TYPE = exports.POI_TYPE = void 0;\nvar POI_TYPE;\n(function (POI_TYPE) {\n    POI_TYPE[\"Address\"] = \"Address\";\n    POI_TYPE[\"Coords\"] = \"Coords\";\n    POI_TYPE[\"POI\"] = \"POI\";\n    POI_TYPE[\"Stop\"] = \"Stop\";\n})(POI_TYPE = exports.POI_TYPE || (exports.POI_TYPE = {}));\nvar PIN_TYPE;\n(function (PIN_TYPE) {\n    PIN_TYPE[\"stop\"] = \"stop\";\n    PIN_TYPE[\"platform\"] = \"platform\";\n    PIN_TYPE[\"poi\"] = \"poi\";\n    PIN_TYPE[\"rentabike\"] = \"rentabike\";\n    PIN_TYPE[\"ticketmachine\"] = \"ticketmachine\";\n    PIN_TYPE[\"carsharing\"] = \"carsharing\";\n    PIN_TYPE[\"parkandride\"] = \"parkandride\";\n    PIN_TYPE[\"unknown\"] = \"unknown\";\n})(PIN_TYPE = exports.PIN_TYPE || (exports.PIN_TYPE = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Fahrgast {\n    constructor(alter, nutzerparameter, rabattmedien, berechtigungen = \"\") {\n        this.alter = alter;\n        this.nutzerparameter = nutzerparameter;\n        this.rabattmedien = rabattmedien;\n        this.berechtigungen = berechtigungen;\n    }\n    export() {\n        const arr = [];\n        arr.push(this.alter.toString());\n        const nutzerparameterString = `${this.nutzerparameter.nr};${this.nutzerparameter.name}`;\n        arr.push(nutzerparameterString);\n        if (this.rabattmedien) {\n            arr.push(`${this.rabattmedien.nr};${this.rabattmedien.name}`);\n        }\n        else {\n            arr.push(\"\");\n        }\n        arr.push(\"\");\n        return arr;\n    }\n}\nexports.Fahrgast = Fahrgast;\nFahrgast.ExcelColumns = 4;\n//# sourceMappingURL=Fahrgast.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dvb = require(\"dvbjs\");\nconst moment = require(\"moment-timezone\");\nconst exportExcel_1 = require(\"./exportExcel\");\nconst Fahrgast_1 = require(\"./Fahrgast\");\nconst Fahrt_1 = require(\"./Fahrt\");\nclass Tester {\n    constructor() {\n        this.excel = new exportExcel_1.ExcelExport();\n    }\n    static convertDateToXmlTimestamp(date) {\n        const time = moment(date);\n        return time.tz(\"Europe/Berlin\").toISOString(true);\n    }\n    runTestCasesFromFile(testCases, outputFileName) {\n        testCases.forEach((testCase) => {\n            const departureDate = testCase.date ? testCase.date : new Date();\n            dvb.route(testCase.vonId.toString(), testCase.nachId.toString(), departureDate, false)\n                .then((route) => {\n                this.formatTestCase({\n                    nr: testCase.nr,\n                    trip: route.trips[1],\n                    fahrgaeste: testCase.fahrgaeste,\n                    angebote: testCase.angebote,\n                    bemerkung: testCase.bemerkung,\n                    filterFootpaths: testCase.filterFootpaths,\n                });\n            })\n                .catch((err) => console.log(err, testCase));\n        });\n        setTimeout(() => { this.excel.saveFile(outputFileName); }, 5000);\n    }\n    exportSingleTestCase(testCase) {\n        this.formatTestCase(testCase);\n        return this.excel.toBuffer();\n    }\n    formatTestCase(testCase) {\n        if (testCase.filterFootpaths != null) {\n            testCase.filterFootpaths = testCase.filterFootpaths;\n        }\n        else {\n            testCase.filterFootpaths = true;\n        }\n        const fahrt = new Fahrt_1.Fahrt(testCase.trip, testCase.filterFootpaths);\n        let arr = [];\n        arr = arr.concat([testCase.nr.toString(10)]);\n        arr = arr.concat([\"1\"]);\n        arr = arr.concat([\"1\"]);\n        arr = arr.concat([\"58\"]);\n        arr = arr.concat([\"Kaufangebote\"]);\n        const actualDate = Tester.convertDateToXmlTimestamp(new Date());\n        arr = arr.concat([actualDate]);\n        arr = arr.concat(fahrt.exportToExcel());\n        let fahrgaesteExport = [];\n        testCase.fahrgaeste.forEach((fahrgast) => {\n            fahrgaesteExport = fahrgaesteExport.concat(fahrgast.export());\n        });\n        for (let index = 0; index < (Fahrgast_1.Fahrgast.ExcelColumns * 5); index++) {\n            if (!fahrgaesteExport[index]) {\n                fahrgaesteExport[index] = \"\";\n            }\n        }\n        arr = arr.concat(fahrgaesteExport);\n        arr.push(testCase.bemerkung ? testCase.bemerkung : \"\");\n        const angeboteExport = [];\n        for (let i = 0; i < 6; i++) {\n            for (let j = 0; j < 6; j++) {\n                let ticket = null;\n                if (testCase.angebote[i] && testCase.angebote[i][j]) {\n                    ticket = testCase.angebote[i][j];\n                }\n                angeboteExport[i * 6 + j] = ticket ? ticket.export(fahrt.fahrtenbezug()) : \"\";\n            }\n        }\n        arr = arr.concat(angeboteExport);\n        this.excel.addRow(arr);\n    }\n}\nexports.Tester = Tester;\n//# sourceMappingURL=Tester.js.map","\"use strict\";\n/* eslint @typescript-eslint/no-non-null-assertion: 0 */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.coords = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utils = __importStar(require(\"./utils\"));\n/**\n * Find the coordinates for a given POI id.\n * @param id the POI ID\n * @param timeout the timeout of the request\n * @returns coordinate as [lng, lat] or undefined\n */\nfunction coords(id, timeout = 5000) {\n    const options = {\n        url: \"https://www.dvb.de/apps/map/coordinates\",\n        params: {\n            id,\n        },\n        responseType: \"text\",\n        timeout,\n    };\n    return axios_1.default(options).then((response) => {\n        if (response.data) {\n            const coordinates = response.data.split(\"|\");\n            if (coordinates.length > 1) {\n                return utils.WmOrGK4toWGS84(coordinates[1], coordinates[0]);\n            }\n        }\n        return undefined;\n    });\n}\nexports.coords = coords;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAddress = exports.findPOI = exports.findStop = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utils = __importStar(require(\"./utils\"));\nasync function pointFinder(name, stopsOnly, assignedStops, timeout) {\n    if (typeof name !== \"string\") {\n        throw utils.constructError(\"ValidationError\", \"query has to be a string\");\n    }\n    const stopName = name.trim();\n    const options = {\n        url: \"https://webapi.vvo-online.de/tr/pointfinder\",\n        params: {\n            format: \"json\",\n            stopsOnly,\n            assignedStops,\n            limit: 0,\n            query: stopName,\n            dvb: true,\n        },\n        timeout,\n    };\n    return axios_1.default(options)\n        .then((response) => {\n        // check status of response\n        utils.checkStatus(response.data);\n        const result = [];\n        if (response.data.Points) {\n            response.data.Points.forEach((p) => {\n                const poi = p.split(\"|\");\n                const coords = utils.WmOrGK4toWGS84(poi[5], poi[4]);\n                const pointName = poi[3].replace(/'/g, \"\");\n                if (pointName && coords) {\n                    const city = poi[2] === \"\" ? \"Dresden\" : poi[2];\n                    const { id, type } = utils.parsePoiID(poi[0]);\n                    result.push({\n                        city,\n                        coords,\n                        name: pointName,\n                        id,\n                        type,\n                    });\n                }\n            });\n        }\n        return result;\n    })\n        .catch(utils.convertError);\n}\n/**\n * Search for a single stop in the network of the DVB.\n * @param searchString the name of the stop\n * @param timeout the timeout of the request\n * @returns an array of all possible hits including their GPS coordinates.\n */\nfunction findStop(searchString, timeout = 5000) {\n    return pointFinder(searchString, true, false, timeout);\n}\nexports.findStop = findStop;\n/**\n * Search for POI in the network of the DVB.\n * @param searchString the name of the stop\n * @param timeout the timeout of the request\n * @returns an array of all possible hits including their GPS coordinates.\n */\nfunction findPOI(searchString, timeout = 5000) {\n    return pointFinder(searchString, false, false, timeout);\n}\nexports.findPOI = findPOI;\n/**\n * Lookup address and nearby stops by coordinate.\n * @param lng longitude of the coordinate\n * @param lat latitude of the coordinate\n * @param timeout the timeout of the request\n * @returns the adress and neaby stops\n */\nfunction findAddress(lng, lat, timeout = 5000) {\n    const gk4 = utils.WGS84toGK4(lng, lat);\n    return pointFinder(`coord:${gk4[0]}:${gk4[1]}`, false, true, timeout).then((points) => {\n        if (points.length === 0) {\n            return undefined;\n        }\n        const address = Object.assign(Object.assign({}, points[0]), { stops: points.slice(1) || [] });\n        return address;\n    });\n}\nexports.findAddress = findAddress;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lines = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utils = __importStar(require(\"./utils\"));\nfunction parseDirection(direction) {\n    return direction.Name;\n}\nfunction parseLine(line) {\n    return {\n        name: line.Name,\n        mode: utils.parseMode(line.Mot),\n        diva: utils.parseDiva(line.Diva),\n        directions: line.Directions.map(parseDirection),\n    };\n}\n/**\n * get a list of availible tram/bus lines for a stop.\n * @param stopID the stop ID\n * @param timeout the timeout of the request\n */\nfunction lines(stopID, timeout = 5000) {\n    const options = {\n        url: \"https://webapi.vvo-online.de/stt/lines\",\n        params: {\n            format: \"json\",\n            stopid: stopID,\n        },\n        timeout,\n    };\n    return axios_1.default(options)\n        .then((response) => {\n        // check status of response\n        utils.checkStatus(response.data);\n        let result = [];\n        if (response.data.Lines) {\n            result = response.data.Lines.map((l) => parseLine(l));\n        }\n        return result;\n    })\n        .catch(utils.convertError);\n}\nexports.lines = lines;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.monitor = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utils_1 = require(\"./utils\");\n/**\n * Monitor a single stop to see every bus or tram leaving this stop after the specified time offset.\n * @param stopID ID of the stop\n * @param offset how many minutes in the future, 0 for now\n * @param amount number of results\n * @param timeout the timeout of the request\n */\nfunction monitor(stopID, offset = 0, amount = 0, timeout = 5000) {\n    const now = new Date();\n    const time = new Date(now.getTime() + offset * 60 * 1000);\n    const options = {\n        url: \"https://webapi.vvo-online.de/dm\",\n        params: {\n            format: \"json\",\n            stopid: stopID,\n            time: time.toISOString(),\n            isarrival: false,\n            limit: amount,\n            shorttermchanges: true,\n            mentzonly: false,\n        },\n        timeout,\n    };\n    return axios_1.default(options)\n        .then((response) => {\n        // check status of response\n        utils_1.checkStatus(response.data);\n        let result = [];\n        if (response.data.Departures) {\n            result = response.data.Departures.map((d) => {\n                const arrivalTime = utils_1.parseDate(d.RealTime ? d.RealTime : d.ScheduledTime);\n                const scheduledTime = utils_1.parseDate(d.ScheduledTime);\n                return {\n                    arrivalTime,\n                    scheduledTime,\n                    id: d.Id,\n                    line: d.LineName,\n                    direction: d.Direction,\n                    platform: utils_1.parsePlatform(d.Platform),\n                    arrivalTimeRelative: utils_1.dateDifference(now, arrivalTime),\n                    scheduledTimeRelative: utils_1.dateDifference(now, scheduledTime),\n                    delayTime: utils_1.dateDifference(scheduledTime, arrivalTime),\n                    state: d.State ? d.State : \"Unknown\",\n                    mode: utils_1.parseMode(d.Mot),\n                    diva: utils_1.parseDiva(d.Diva),\n                };\n            });\n        }\n        return result;\n    })\n        .catch(utils_1.convertError);\n}\nexports.monitor = monitor;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pins = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst interfaces_1 = require(\"./interfaces\");\nconst utils = __importStar(require(\"./utils\"));\n/**\n * Search for different kinds of POIs inside a given bounding box.\n * @param swlng the longitude of the south west coordinate\n * @param swlat the latitude of the south west coordinate\n * @param nelng the longitude of the north east coordinate\n * @param nelat the latitude of the north east coordinate\n * @param pinTypes array of pin types\n * @param timeout the timeout of the request\n */\nfunction pins(swlng, swlat, nelng, nelat, pinTypes = [interfaces_1.PIN_TYPE.stop], timeout = 5000) {\n    const sw = utils.WGS84toWm(swlng, swlat);\n    const ne = utils.WGS84toWm(nelng, nelat);\n    let url = \"https://www.dvb.de/apps/map/pins?showLines=true\";\n    pinTypes.forEach((type) => (url += `&pintypes=${type}`));\n    const options = {\n        url,\n        params: {\n            swlng: sw[0],\n            swlat: sw[1],\n            nelng: ne[0],\n            nelat: ne[1],\n        },\n        responseType: \"text\",\n        timeout,\n    };\n    return axios_1.default(options)\n        .then((response) => {\n        return response.data || [];\n    })\n        .then((elements) => elements.map((elem) => utils.parsePin(elem)));\n}\nexports.pins = pins;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.route = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utils = __importStar(require(\"./utils\"));\n/**\n * Query the server for possible routes from one stop to another.\n * @param originID the id of the origin stop\n * @param destinationID the id of the destination stop\n * @param time starting at what time\n * @param isArrivalTime is time the arrival time\n * @param timeout the timeout of the request\n * @param viaID the id of the destination stop\n * @param standardsettings request routes with special settings\n * @returns Returns multiple possible trips, the bus-/tramlines to be taken,\n * the single stops, their arrival and departure times and their GPS coordinates.\n * The path property of a trip contains an array consisting of all the coordinates\n * describing the path of this node. This can be useful to draw the route on a map.\n */\nfunction route(originID, destinationID, time = new Date(), isArrivalTime = true, timeout = 15000, \n// standardsettings = {},\nvia) {\n    const options = {\n        url: \"https://webapi.vvo-online.de/tr/trips\",\n        params: {\n            format: \"json\",\n            origin: originID,\n            destination: destinationID,\n            isarrivaltime: isArrivalTime,\n            shorttermchanges: true,\n            time: time.toISOString(),\n            // standardsettings: standardsettings,\n            via: via,\n        },\n        timeout,\n    };\n    // eslint-disable-next-line no-console\n    console.log(options);\n    return axios_1.default(options)\n        .then((response) => {\n        // check status of response\n        utils.checkStatus(response.data);\n        let origin;\n        let destination;\n        let trips = [];\n        if (response.data.Routes) {\n            trips = response.data.Routes.map(utils.extractTrip);\n            if (trips && trips.length > 0) {\n                const firstTrip = trips[0];\n                if (firstTrip.departure) {\n                    origin = {\n                        id: firstTrip.departure.id,\n                        name: firstTrip.departure.name,\n                        city: firstTrip.departure.city,\n                        coords: firstTrip.departure.coords,\n                    };\n                }\n                if (firstTrip.arrival) {\n                    destination = {\n                        id: firstTrip.arrival.id,\n                        name: firstTrip.arrival.name,\n                        city: firstTrip.arrival.city,\n                        coords: firstTrip.arrival.coords,\n                    };\n                }\n            }\n        }\n        return {\n            origin,\n            destination,\n            trips,\n        };\n    })\n        .catch(utils.convertError);\n}\nexports.route = route;\n"],"sourceRoot":""}